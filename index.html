<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI-Enhanced Gas Delivery Chatbot - DEMO</title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    /* Demo banner */
    .demo-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #ff6b35;
      color: white;
      text-align: center;
      padding: 8px;
      z-index: 10002;
      font-size: 14px;
      font-weight: 600;
    }
    
    #chat-bubble {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      width: 64px;
      height: 64px;
      border-radius: 50%;
      font-size: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 9999;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
    }
    
    #chat-bubble:hover {
      transform: scale(1.1) translateY(-2px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.4);
    }
    
    #chat-bubble.has-notification::after {
      content: '';
      position: absolute;
      top: 8px;
      right: 8px;
      width: 12px;
      height: 12px;
      background: #ff4757;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.2); opacity: 0.7; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    #chat-container {
      position: fixed;
      bottom: 100px;
      right: 20px;
      width: 380px;
      height: 550px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.2);
      display: none;
      flex-direction: column;
      overflow: hidden;
      z-index: 9998;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    #chat-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    #chat-title {
      font-weight: 600;
      font-size: 16px;
    }
    
    #close-btn {
      background: none;
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      transition: background 0.2s;
    }
    
    #close-btn:hover {
      background: rgba(255,255,255,0.2);
    }
    
    #chatbox {
      flex-grow: 1;
      padding: 16px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      background: #f8f9fa;
      gap: 12px;
    }
    
    .message {
      max-width: 85%;
      padding: 12px 16px;
      border-radius: 16px;
      line-height: 1.4;
      word-wrap: break-word;
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .bot {
      background: white;
      align-self: flex-start;
      border-bottom-left-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border: 1px solid #e9ecef;
    }
    
    .user {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 6px;
    }
    
    .system {
      background: #fff3cd;
      color: #856404;
      align-self: center;
      font-size: 13px;
      border: 1px solid #ffeaa7;
    }
    
    .error {
      background: #f8d7da;
      color: #721c24;
      align-self: flex-start;
      border: 1px solid #f5c6cb;
    }
    
    #inputRow {
      display: flex;
      padding: 16px;
      border-top: 1px solid #e9ecef;
      background: white;
      gap: 12px;
      align-items: flex-end;
    }
    
    #userInput {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid #e9ecef;
      border-radius: 24px;
      font-size: 14px;
      resize: none;
      min-height: 20px;
      max-height: 100px;
      transition: all 0.2s ease;
      font-family: inherit;
    }
    
    #userInput:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    #sendBtn {
      width: 44px;
      height: 44px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }
    
    #sendBtn:hover:not(:disabled) {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }
    
    #sendBtn:disabled {
      background: #dee2e6;
      cursor: not-allowed;
      transform: none;
    }
    
    .suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 8px 0;
    }
    
    .suggestion-btn {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border: 2px solid #dee2e6;
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s ease;
      color: #495057;
      font-weight: 500;
    }
    
    .suggestion-btn:hover {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-color: transparent;
      transform: translateY(-1px);
    }
    
    .typing-indicator {
      display: flex;
      padding: 12px 16px;
      gap: 6px;
      align-self: flex-start;
      background: white;
      border-radius: 16px;
      border-bottom-left-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border: 1px solid #e9ecef;
    }
    
    .typing-dot {
      width: 8px;
      height: 8px;
      background: #667eea;
      border-radius: 50%;
      animation: typing 1.4s infinite ease-in-out;
    }
    
    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }
    
    @keyframes typing {
      0%, 60%, 100% { transform: translateY(0); }
      30% { transform: translateY(-10px); }
    }
    
    .confidence-indicator {
      font-size: 11px;
      color: #6c757d;
      margin-top: 4px;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    
    .confidence-bar {
      width: 40px;
      height: 3px;
      background: #e9ecef;
      border-radius: 2px;
      overflow: hidden;
    }
    
    .confidence-fill {
      height: 100%;
      background: linear-gradient(90deg, #ff4757, #ffa502, #2ed573);
      transition: width 0.3s ease;
    }
    
    .ai-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    @media (max-width: 480px) {
      #chat-container {
        width: calc(100vw - 40px);
        height: calc(100vh - 140px);
        bottom: 100px;
        left: 20px;
        right: 20px;
      }
    }
    
    .status-indicator {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: #6c757d;
      padding: 8px 16px;
      background: #f8f9fa;
      border-top: 1px solid #e9ecef;
    }
    
    .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #28a745;
      animation: pulse 2s infinite;
    }
  </style>
</head>
<body>

<!-- Demo Banner -->
<div class="demo-banner">
  üöÄ DEMO MODE - Experience our AI-powered customer service bot
</div>

<button id="chat-bubble" aria-label="Open chat">üí¨</button>

<div id="chat-container" role="dialog" aria-labelledby="chat-title" aria-hidden="true">
  <div id="chat-header">
    <div id="chat-title">AI Assistant <span class="ai-badge">‚óèDEMO</span></div>
    <button id="close-btn" aria-label="Close chat">√ó</button>
  </div>
  
  <div id="chatbox" role="log" aria-live="polite">
    <div class="message bot">
      Hi! I'm your AI-powered gas delivery assistant. This is a demo showcasing our intelligent customer service capabilities. How can I help you today? üöö
      <div class="confidence-indicator">
        AI Confidence: <div class="confidence-bar"><div class="confidence-fill" style="width: 95%"></div></div>
      </div>
    </div>
    <div class="suggestions">
      <button class="suggestion-btn" onclick="chatbot.handleSuggestion('Order gas delivery')">Order gas delivery</button>
      <button class="suggestion-btn" onclick="chatbot.handleSuggestion('Check pricing')">Check pricing</button>
      <button class="suggestion-btn" onclick="chatbot.handleSuggestion('Schedule delivery')">Schedule delivery</button>
      <button class="suggestion-btn" onclick="chatbot.handleSuggestion('Contact information')">Contact information</button>
    </div>
    <div class="status-indicator">
      <div class="status-dot"></div>
      <span>Demo AI Assistant Online</span>
    </div>
  </div>
  
  <div id="inputRow">
    <textarea id="userInput" placeholder="Type your message here..." rows="1"></textarea>
    <button id="sendBtn" disabled>‚û§</button>
  </div>
</div>

<script>
// Demo responses database - simulates AI responses without actual API calls
const DEMO_RESPONSES = {
  // Order-related responses
  order: [
    "I'd be happy to help you place an order! What size gas cylinder do you need? We have:\n‚Ä¢ 9kg cylinders (perfect for small households)\n‚Ä¢ 15kg cylinders (ideal for medium families)\n‚Ä¢ 45kg cylinders (great for large families or commercial use)",
    "Great choice! Let me help you with your gas delivery order. Could you tell me which cylinder size you prefer and your delivery address?",
    "Perfect! I can process your order right away. What quantity and size of gas cylinders would you like, and when would you prefer delivery?"
  ],
  
  pricing: [
    "Here's our current pricing:\n\nüì¶ Delivery Fees:\n‚Ä¢ Standard delivery: $15 (next business day)\n‚Ä¢ Express delivery: $25 (same day, 2-4 hours)\n‚Ä¢ Emergency delivery: $45 (within 1 hour, 24/7)\n\nüè∑Ô∏è Cylinder Sizes:\n‚Ä¢ 9kg, 15kg, and 45kg available\n‚Ä¢ Bulk orders (3+ cylinders): 10% discount on delivery\n\nWould you like specific pricing for a particular size?",
    "Our competitive rates include:\n‚Ä¢ Free safety inspection with every delivery\n‚Ä¢ 24/7 customer support\n‚Ä¢ Same-day delivery available\n‚Ä¢ Bulk order discounts\n\nWhat size cylinder are you interested in for exact pricing?"
  ],
  
  schedule: [
    "I can help you schedule your delivery! We offer:\n\n‚è∞ Delivery Windows:\n‚Ä¢ Morning (8 AM - 12 PM)\n‚Ä¢ Afternoon (12 PM - 5 PM)\n‚Ä¢ Evening (5 PM - 8 PM)\n‚Ä¢ Emergency 24/7 service\n\nWhat day and time works best for you?",
    "Our scheduling is very flexible! We deliver 7 days a week. When would be most convenient for your delivery? I can also set up recurring deliveries if you'd prefer."
  ],
  
  contact: [
    "Here's how to reach us:\n\nüìû Phone: +1-800-GAS-DELIVERY\nüïê Hours: 24/7 Support\nüìß Email: support@gasdelivery.com\nüí¨ Live Chat: Right here!\nüöö Emergency Service: Always available\n\nWe're always here to help! Is there anything specific you'd like to know?",
    "You can contact our support team anytime! We pride ourselves on quick response times and excellent customer service. Need immediate assistance? I'm here to help right now!"
  ],
  
  safety: [
    "Safety is our top priority! Here are important gas safety tips:\n\n‚úÖ Always check for leaks before use\n‚úÖ Store cylinders upright in ventilated areas\n‚úÖ Keep away from heat sources\n‚úÖ Never store indoors\n‚úÖ Use only approved regulators\n\nWe provide free safety inspections with every delivery. Would you like more detailed safety information?"
  ],
  
  general: [
    "I'm here to help with all your gas delivery needs! I can assist with:\n‚Ä¢ Placing new orders\n‚Ä¢ Checking delivery status\n‚Ä¢ Safety information\n‚Ä¢ Pricing and scheduling\n‚Ä¢ Emergency deliveries\n\nWhat would you like to know more about?",
    "Thanks for trying our AI assistant! I'm designed to make gas delivery as convenient as possible. Whether you need immediate service or want to schedule regular deliveries, I'm here to help!",
    "Our AI system learns from every interaction to provide better service. I can handle complex orders, answer technical questions, and even help with emergency situations. How can I assist you today?"
  ],
  
  sizes: [
    "Let me explain our cylinder sizes:\n\nüî∏ 9kg Cylinders:\n‚Ä¢ Perfect for small households (1-2 people)\n‚Ä¢ Lasts approximately 4-6 weeks\n‚Ä¢ Lightweight and easy to handle\n\nüî∏ 15kg Cylinders:\n‚Ä¢ Ideal for medium families (3-4 people)\n‚Ä¢ Lasts approximately 6-8 weeks\n‚Ä¢ Most popular choice\n\nüî∏ 45kg Cylinders:\n‚Ä¢ Great for large families or commercial use\n‚Ä¢ Lasts approximately 3-4 months\n‚Ä¢ Best value for heavy users\n\nWhich size sounds right for your needs?"
  ],
  
  delivery_areas: [
    "We deliver throughout the metropolitan area and surrounding suburbs! Our coverage includes:\n\nüèôÔ∏è City Center: Same-day delivery\nüèòÔ∏è Suburbs: Next-day standard delivery\nüåÑ Rural Areas: 2-3 day delivery\n\nJust provide your address and I'll confirm delivery options and timing for your area. Where would you like your delivery?"
  ],
  
  payment: [
    "We accept multiple payment methods for your convenience:\n\nüí≥ Credit/Debit Cards (Visa, MasterCard, Amex)\nüì± Digital Wallets (Apple Pay, Google Pay)\nüí∞ Cash on Delivery\nüè¶ Bank Transfer\nüìÑ Account Billing (for regular customers)\n\nPayment is secure and processed at the time of delivery. Which payment method would you prefer?"
  ]
};

// Simple state management for demo
class DemoChatbot {
  constructor() {
    this.elements = this.initializeElements();
    this.conversationState = {
      orderStep: null,
      orderData: {},
      messageCount: 0
    };
    this.bindEvents();
    this.initialized = false;
    
    // Add demo banner margin to body
    document.body.style.marginTop = '40px';
  }

  initializeElements() {
    return {
      chatBubble: document.getElementById('chat-bubble'),
      chatContainer: document.getElementById('chat-container'),
      chatbox: document.getElementById('chatbox'),
      userInput: document.getElementById('userInput'),
      sendBtn: document.getElementById('sendBtn'),
      closeBtn: document.getElementById('close-btn')
    };
  }

  bindEvents() {
    this.elements.chatBubble.addEventListener('click', () => this.toggleChat());
    this.elements.closeBtn.addEventListener('click', () => this.closeChat());
    this.elements.sendBtn.addEventListener('click', () => this.sendMessage());
    
    this.elements.userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        this.sendMessage();
      }
    });

    this.elements.userInput.addEventListener('input', () => {
      this.elements.sendBtn.disabled = !this.elements.userInput.value.trim();
      this.autoResize();
    });
  }

  toggleChat() {
    const isVisible = this.elements.chatContainer.style.display === 'flex';
    if (isVisible) {
      this.closeChat();
    } else {
      this.openChat();
    }
  }

  openChat() {
    this.elements.chatContainer.style.display = 'flex';
    this.elements.chatContainer.setAttribute('aria-hidden', 'false');
    this.elements.userInput.focus();
    this.initialized = true;
  }

  closeChat() {
    this.elements.chatContainer.style.display = 'none';
    this.elements.chatContainer.setAttribute('aria-hidden', 'true');
  }

  async sendMessage() {
    const message = this.elements.userInput.value.trim();
    if (!message) return;

    this.addMessage(message, 'user');
    this.elements.userInput.value = '';
    this.elements.sendBtn.disabled = true;
    this.autoResize();

    this.showTypingIndicator();

    // Simulate AI processing delay
    await this.delay(1000 + Math.random() * 2000);

    this.hideTypingIndicator();
    
    const response = this.generateDemoResponse(message);
    this.addMessage(response.text, 'bot', { confidence: response.confidence });

    // Sometimes add suggestions
    if (response.suggestions && Math.random() < 0.6) {
      this.addSuggestions(response.suggestions);
    }

    this.conversationState.messageCount++;
  }

  generateDemoResponse(userMessage) {
    const lowerMessage = userMessage.toLowerCase();
    
    // Detect intent based on keywords
    if (this.containsKeywords(lowerMessage, ['order', 'buy', 'purchase', 'delivery', 'need', 'want'])) {
      return {
        text: this.getRandomResponse('order'),
        confidence: 0.92,
        suggestions: ['9kg cylinder', '15kg cylinder', '45kg cylinder', 'Emergency delivery']
      };
    }
    
    if (this.containsKeywords(lowerMessage, ['price', 'cost', 'fee', 'charge', 'how much'])) {
      return {
        text: this.getRandomResponse('pricing'),
        confidence: 0.89,
        suggestions: ['Place order', 'Delivery areas', 'Payment methods']
      };
    }
    
    if (this.containsKeywords(lowerMessage, ['schedule', 'when', 'time', 'appointment', 'book'])) {
      return {
        text: this.getRandomResponse('schedule'),
        confidence: 0.94,
        suggestions: ['Morning delivery', 'Afternoon delivery', 'Emergency service']
      };
    }
    
    if (this.containsKeywords(lowerMessage, ['contact', 'phone', 'call', 'support', 'help'])) {
      return {
        text: this.getRandomResponse('contact'),
        confidence: 0.96
      };
    }
    
    if (this.containsKeywords(lowerMessage, ['safety', 'safe', 'leak', 'storage', 'danger'])) {
      return {
        text: this.getRandomResponse('safety'),
        confidence: 0.88,
        suggestions: ['Safety inspection', 'Place order', 'Emergency service']
      };
    }
    
    if (this.containsKeywords(lowerMessage, ['size', 'kg', 'cylinder', 'tank', 'bottle'])) {
      return {
        text: this.getRandomResponse('sizes'),
        confidence: 0.91,
        suggestions: ['9kg order', '15kg order', '45kg order']
      };
    }
    
    if (this.containsKeywords(lowerMessage, ['area', 'location', 'address', 'deliver', 'where'])) {
      return {
        text: this.getRandomResponse('delivery_areas'),
        confidence: 0.87,
        suggestions: ['Check my area', 'Schedule delivery', 'Emergency service']
      };
    }
    
    if (this.containsKeywords(lowerMessage, ['pay', 'payment', 'card', 'cash', 'money'])) {
      return {
        text: this.getRandomResponse('payment'),
        confidence: 0.93,
        suggestions: ['Place order', 'Check pricing', 'Schedule delivery']
      };
    }
    
    // Default response for unmatched queries
    return {
      text: this.getRandomResponse('general'),
      confidence: 0.75,
      suggestions: ['Order gas', 'Check pricing', 'Schedule delivery', 'Safety info']
    };
  }

  containsKeywords(message, keywords) {
    return keywords.some(keyword => message.includes(keyword));
  }

  getRandomResponse(category) {
    const responses = DEMO_RESPONSES[category] || DEMO_RESPONSES.general;
    return responses[Math.floor(Math.random() * responses.length)];
  }

  addMessage(content, sender, metadata = {}) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}`;
    messageDiv.textContent = content;

    if (sender === 'bot' && metadata.confidence) {
      const confidenceDiv = document.createElement('div');
      confidenceDiv.className = 'confidence-indicator';
      confidenceDiv.innerHTML = `
        AI Confidence: 
        <div class="confidence-bar">
          <div class="confidence-fill" style="width: ${metadata.confidence * 100}%"></div>
        </div>
      `;
      messageDiv.appendChild(confidenceDiv);
    }

    this.elements.chatbox.appendChild(messageDiv);
    this.scrollToBottom();
  }

  addSuggestions(suggestions) {
    const suggestionsDiv = document.createElement('div');
    suggestionsDiv.className = 'suggestions';
    
    suggestions.forEach(suggestion => {
      const btn = document.createElement('button');
      btn.className = 'suggestion-btn';
      btn.textContent = suggestion;
      btn.addEventListener('click', () => {
        this.handleSuggestion(suggestion);
      });
      suggestionsDiv.appendChild(btn);
    });
    
    this.elements.chatbox.appendChild(suggestionsDiv);
    this.scrollToBottom();
  }

  handleSuggestion(suggestion) {
    this.elements.userInput.value = suggestion;
    this.elements.sendBtn.disabled = false;
    this.sendMessage();
  }

  showTypingIndicator() {
    const typingDiv = document.createElement('div');
    typingDiv.className = 'typing-indicator';
    typingDiv.id = 'typing-indicator';
    typingDiv.innerHTML = `
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
    `;
    this.elements.chatbox.appendChild(typingDiv);
    this.scrollToBottom();
  }

  hideTypingIndicator() {
    const typingIndicator = document.getElementById('typing-indicator');
    if (typingIndicator) {
      typingIndicator.remove();
    }
  }

  autoResize() {
    const textarea = this.elements.userInput;
    textarea.style.height = 'auto';
    textarea.style.height = Math.min(textarea.scrollHeight, 100) + 'px';
  }

  scrollToBottom() {
    this.elements.chatbox.scrollTop = this.elements.chatbox.scrollHeight;
  }

  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }
}

// Initialize demo chatbot when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  window.chatbot = new DemoChatbot();
  
  // Add pulsing notification after 3 seconds
  setTimeout(() => {
    document.getElementById('chat-bubble').classList.add('has-notification');
  }, 3000);
  
  console.log('üöÄ Demo Chatbot Initialized - No API calls, all responses are simulated!');
});

</script>
</body>
</html>
